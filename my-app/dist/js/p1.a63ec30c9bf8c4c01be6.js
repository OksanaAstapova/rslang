(()=>{"use strict";class e{constructor(e="div",t="",n="",s=null){const r=document.createElement(e);r.className=t,r.textContent=n,s&&Object.entries(s).forEach((([e,t])=>{r.setAttribute(e,t)})),this.node=r}destroy(){this.node.remove()}}class t{constructor(){this.container=document.createElement("div")}render(){return this.container}}function n(e,t,n){const s=document.createElement(e);return"string"==typeof t?s.className=t:s.classList.add(...t),s.innerHTML=n,s}const s=[{name:"Оксана",photo:"./images/team/girl.jpg",github:"https://github.com/OksanaAstapova",rssCVlink:""},{name:"Юрий",photo:"./images/team/boy2.jpg",github:"https://github.com/clukva",rssCVlink:""},{name:"Дмитрий",photo:"./images/team/boy3.jpg",github:"https://github.com/dsh91698",rssCVlink:"https://app.rs.school/cv/055a0262-7fdc-4348-8783-2c3dac4d9521"}],r=(()=>{const e=n("div","team-card",""),t=n("h1","team-header","Наша команда");e.append(t);const r=n("div","members-wrapper","");return e.append(r),s.forEach((e=>{const t=n("div","",`<div class="icon-text"> \n    <span class="icon has-text-info">\n    <i class="fa-brands fa-github"></i>\n    </span> <a href='${e.github}' target="_blank">Github</a> \n    </div>`),s=n("div","member-card",e.name),a=n("figure",["image","is-128x128"],""),i=n("img","is-rounded","");i.src=e.photo,a.append(i),s.append(a),s.append(t),r.append(s)})),e})(),a=document.body.querySelector("#main__root"),i=new class extends t{render(){return document.body.className="body",a.innerHTML="",a.append(r),new e("","","").node}},o=new class extends t{render(){return document.body.className="body",new e("p","","\n Audiocall page").node}};let l=[];const d=e=>{let t="";if(0!=localStorage.length)for(let n=0;n<localStorage.length;n++){let s=localStorage.key(n);s==`${e}`&&(t=`${localStorage.getItem(s)}`)}return t},c=e=>{let t="";if(0!=localStorage.length)for(let n=0;n<localStorage.length;n++){let s=localStorage.key(n);s==e&&(t=`${JSON.parse(localStorage.getItem(s))}`)}return t};window.removeDifficult=async function(e){var t;const n=null===(t=document.getElementById(`difficult-remove ${e}`).parentElement)||void 0===t?void 0:t.parentElement;console.log(null==n?void 0:n.id);let s=c("word-id").split(",");s.forEach((e=>{if(e===(null==n?void 0:n.id)){let t=s.indexOf(e);s.splice(t,1)}})),localStorage.setItem("word-id",JSON.stringify(s)),console.log(s),null==n||n.remove();let r=d("id");(await g(r)).forEach((e=>{if(e.wordId===(null==n?void 0:n.id)){const t=e.wordId;h(r,t)}}));const a=S.children;for(const e of a)e.id===(null==n?void 0:n.id)&&(e.children[0].children[0].style.backgroundColor="white");const i=document.querySelectorAll(".diff"),o=document.querySelector(".difficult");0==i.length&&(o.innerHTML="<p class='no-difficulties'>You have no difficult words in your dictionary</p>")},window.putDifficult=function(e){var t;const n=document.getElementById(`difficult-word ${e}`);n.style.backgroundColor="red";const s=d("id"),r=null===(t=n.parentElement)||void 0===t?void 0:t.parentElement,a=null==r?void 0:r.id;u({userId:s,wordId:a,word:{difficulty:"hard",optional:{testFieldString:"test",testFieldBoolean:!0}}}),c("learnt-id").split(",").forEach((e=>{l.push(e)})),l.push(a);let i=new Set(l);l=Array.from(i),localStorage.setItem("word-id",JSON.stringify(l))};const u=async({userId:e,wordId:t,word:n})=>{let s=d("token");console.log(s);const r=await fetch(`https://rssslang.herokuapp.com/users/${e}/words/${t}`,{method:"POST",headers:{Authorization:`Bearer ${s}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}),a=await r.json();return console.log(a),a},h=async(e,t)=>{let n=d("token");const s=await fetch(`https://rssslang.herokuapp.com/users/${e}/words/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});return await s.json()},g=async e=>{let t=d("token");const n=await fetch(`https://rssslang.herokuapp.com/users/${e}/words`,{method:"GET",headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}});return await n.json()};window.putLearnt=function(e){var t;const n=S.children,s=document.querySelector(".train"),r=null===(t=document.getElementById(`learnt-word ${e}`).parentElement)||void 0===t?void 0:t.parentElement,a=null==r?void 0:r.id;if(null==r?void 0:r.classList.contains("learnt")){let e=c("learnt-id").split(",");e.forEach((t=>{if(t===a){let n=e.indexOf(t);e.splice(n,1)}})),localStorage.setItem("learnt-id",JSON.stringify(e));for(const e of n)e.id===a&&e.classList.remove("learnt");s.disabled=!1,S.style.backgroundColor="#001524"}else{c("learnt-id").split(",").forEach((e=>{p.push(e)})),p.push(a);let e=new Set(p);p=Array.from(e),localStorage.setItem("learnt-id",JSON.stringify(p));for(const e of n)e.id===a&&e.classList.add("learnt")}m()};let p=[];const m=()=>{const e=document.querySelectorAll(".learnt"),t=document.querySelector(".train");20===e.length&&(t.disabled=!0,S.style.backgroundColor="#b0a2f9")};window.logOutUser=()=>{const e=document.querySelector(".login__conteiner"),t=document.querySelector(".autorization-name");e.style.display="flex",t.innerHTML="",localStorage.clear()};const y=e=>{const t=document.querySelector(".wrapper__login"),n=document.querySelector(".login__conteiner"),s=document.querySelector(".autorization-name");t.classList.add("display-none"),n.style.display="none",s.innerHTML=`<p>Hello, ${e}!</p><div class= "log-out" onclick='logOutUser()'></div>`},b=e=>{const t=S.children;for(let n=0;n<t.length;n++)t[n].children[0].children[e].style.display="flex"},v=()=>{let e=c("word-id").split(",");const t=S.children;for(const n of t)for(const t of e)n.id===t&&(n.children[0].children[0].style.backgroundColor="red")},w=()=>{let e=c("learnt-id").split(",");const t=S.children;for(const n of t)for(const t of e)n.id===t&&n.classList.add("learnt");m()};window.playAudio=function(e){const t=document.getElementById(`audio ${e}`),n=document.getElementById(`audioExample ${e}`),s=document.getElementById(`audioMeaning ${e}`);t.play(),t.onended=()=>{s.play()},s.onended=()=>{n.play()}},window.playAudioDiff=function(e){const t=document.getElementById(`audio-diff ${e}`),n=document.getElementById(`audioExample-diff ${e}`),s=document.getElementById(`audioMeaning-diff ${e}`);t.play(),t.onended=()=>{s.play()},s.onended=()=>{n.play()}};const f=document.createElement("div"),S=document.createElement("div"),k=document.createElement("div"),E=async(e,t)=>{const n=await fetch(`https://rssslang.herokuapp.com/words?page=${e}&group=${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});return await n.json()},L=async()=>{await E(0,0);const e=document.createElement("div");e.classList.add("book-buttons"),e.innerHTML="<button class='en' disabled><p>en</p></button>\n    <button class='ru'><p>ru</p></button>\n    <button class = 'dictionary'>DICTIONARY</button>",F.appendChild(e);let t=document.createElement("aside");t.classList.add("left-panel"),["<button id='0' class='A1 active' value='b0a2f9'>ELEMENTARY</button>","<button id='1' class='A2' value='18d8da' >PRE-INTERMEDIATE</button>","<button id='2' class='B1' value='bbcb2d'>INTERMEDIATE</button>","<button id='3' class='B2' value='ffd33f'>UPPER-INTERMEDIATE</button>","<button id='4' class='C1' value='f4973a'>ADVANCED</button>","<button id='5'class='C2'value='e770d4'>PROFICIENCY</button>"].forEach((e=>{t.innerHTML+=e})),f.innerHTML="",f.appendChild(t),f.appendChild(S),F.appendChild(f),k.classList.add("pagination"),k.innerHTML="<button class = 'first' disabled><<</button>\n    <button class = 'prev' disabled><</button>\n    <div class='page-number'>1</div>\n    <button class='next'>></button>\n    <button class='last'>>></button>\n    <button class='train'>Train</button>\n    <div class = 'play-games'>\n    <button class='play-audiocall'>Audiocall</button>\n    <button class='play-sprint'>Sprint</button>\n    </div>",f.classList.add("book-wrapper"),F.appendChild(k),(()=>{const e=document.querySelector(".en"),t=document.querySelector(".ru");t.addEventListener("click",(()=>{t.disabled=!0,e.disabled=!1,(()=>{const e=S.children;console.log(e);for(let t=0;t<e.length;t++){const n=e[t].children[2].children[3];e[t].children[2].children[2].classList.add("hide"),n.classList.remove("hide")}})(),localStorage.setItem("en","hide"),localStorage.setItem("ru","appear")})),e.addEventListener("click",(()=>{t.disabled=!1,e.disabled=!0,(()=>{const e=S.children;for(let t=0;t<e.length;t++){const n=e[t].children[2].children[2];e[t].children[2].children[3].classList.add("hide"),n.classList.remove("hide")}})(),localStorage.setItem("ru","hide"),localStorage.setItem("en","appear")}))})(),(()=>{const e=document.querySelector(".left-panel"),t=document.querySelector(".dictionary"),n=document.querySelector(".first"),s=document.querySelector(".prev");e.addEventListener("click",(async e=>{const r=e.target,a=document.querySelectorAll(".left-panel button");for(let e=0;e<a.length;e++){const t=a[e];t.classList.remove("active"),t.disabled=!1}r.classList.add("active"),r.disabled=!0;const i=+r.id,o=r.value;t.style.backgroundColor=`#${o}`;for(let e=0;e<k.children.length;e++){const t=k.children[e];"BUTTON"==t.tagName&&(t.style.backgroundColor=`#${o}`)}S.innerHTML="",document.querySelector(".page-number").innerHTML="1",[s,n].forEach((e=>{e.disabled=!0}));let l="appear",c="hide";1==document.querySelector(".ru").disabled&&(c="appear",l="hide"),await T(0,i,l,c,o),localStorage.setItem("level",r.id),localStorage.setItem("en",l),localStorage.setItem("ru",c),localStorage.setItem("color",o),localStorage.setItem("page","0"),v(),w(),"Authenticated"===d("authorization")&&(b(0),b(1))}))})(),(()=>{const e=k.children[0],t=k.children[1],n=k.children[3],s=k.children[4],r=document.querySelector(".left-panel").children,a=document.querySelector(".page-number"),i=document.querySelector(".ru");let o=0,l="",c=+a.innerHTML,u="appear",h="hide";k.addEventListener("click",(async g=>{switch(g.target.className){case"first":e.disabled=!0,t.disabled=!0,n.disabled=!1,s.disabled=!1;for(let e=0;e<r.length;e++)if(r[e].classList.contains("active")){const t=r[e];o=+r[e].id,l=t.value}S.innerHTML="",a.innerHTML="1",1==i.disabled&&(h="appear",u="hide"),await T(0,o,u,h,l),localStorage.setItem("page","0");break;case"prev":n.disabled=!1,s.disabled=!1,c=+a.innerHTML,c--;let d=c-1;for(let e=0;e<r.length;e++)if(r[e].classList.contains("active")){const t=r[e];o=+r[e].id,l=t.value}S.innerHTML="",a.innerHTML=c.toString(),c+=-1,0==c&&(e.disabled=!0,t.disabled=!0),1==i.disabled&&(h="appear",u="hide"),await T(d,o,u,h,l),localStorage.setItem("page",d.toString());break;case"next":e.disabled=!1,t.disabled=!1,c=+a.innerHTML,c++,a.innerHTML=c.toString();let g=c-1;S.innerHTML="";for(let e=0;e<r.length;e++)if(r[e].classList.contains("active")){const t=r[e];o=+r[e].id,l=t.value}30==c&&(n.disabled=!0,s.disabled=!0),1==i.disabled&&(h="appear",u="hide"),await T(g,o,u,h,l),localStorage.setItem("page",g.toString());break;case"last":e.disabled=!1,t.disabled=!1,n.disabled=!0,s.disabled=!0;for(let e=0;e<r.length;e++)if(r[e].classList.contains("active")){const t=r[e];o=+r[e].id,l=t.value}S.innerHTML="",a.innerHTML="30",1==i.disabled&&(h="appear",u="hide"),await T(29,o,u,h,l),localStorage.setItem("page","29")}v(),w(),"Authenticated"===d("authorization")&&(b(0),b(1))}))})(),(()=>{const e=document.querySelector(".dictionary"),t=document.querySelector(".en"),n=document.querySelector(".ru"),s=document.querySelector(".book-title"),r=document.createElement("div");r.classList.add("difficult"),e.addEventListener("click",(async()=>{if(e.classList.contains("active"))e.classList.remove("active"),[k,f,t,n].forEach((e=>{e.style.display="flex"})),s.innerText="Book",r.innerHTML="",r.style.display="none";else{r.style.display="flex",e.classList.add("active"),[k,f,t,n].forEach((e=>{e.style.display="none"})),s.innerText="Dictionary";let a=d("id");const i=await g(a),o=[],l=[];i.forEach((e=>{o.push(e.wordId)})),console.log(o);for(let e=0;e<7;e++)for(let t=0;t<31;t++){let n=await E(t,e);for(let e=0;e<n.length;e++){const t=n[e];for(let e=0;e<o.length;e++){const n=o[e];t.id===n&&l.push(t)}}if(l.length===o.length)break}if(console.log(l),0==l.length)r.innerHTML="<p class='no-difficulties'>You have no difficult words in your dictionary</p>",F.appendChild(r);else{for(let e=0;e<l.length;e++){const s=l[e],a=`<div class='card diff' id='${s.id}'>\n           <div class='card-img' >\n             <div class='difficult-word-remove' data-tooltip="remove" onclick='removeDifficult(${e})' id='difficult-remove ${e}'>X</div>\n             <img src='https://rssslang.herokuapp.com/${s.image}' alt='${s.word}'>\n           </div>\n           <div class='card-audio' onclick='playAudioDiff(${e})'>\n             <audio id='audio-diff ${e}' src='https://rssslang.herokuapp.com/${s.audio}'></audio>\n             <audio id='audioExample-diff ${e}' src='https://rssslang.herokuapp.com/${s.audioExample}'></audio>\n             <audio id='audioMeaning-diff ${e}' src='https://rssslang.herokuapp.com/${s.audioMeaning}'></audio>\n \n             <svg width="0" height="0" class="hidden"><symbol version="1.1" id="audio" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" xml:space="preserve" viewBox="0 0 496.159 496.159">\n             <path style="fill:#orange;" d="M496.159,248.085c0-137.023-111.07-248.082-248.076-248.082C111.071,0.003,0,111.063,0,248.085\n               c0,137.001,111.07,248.07,248.083,248.07C385.089,496.155,496.159,385.086,496.159,248.085z"/>\n             <g>\n               <path style="fill:#FFFFFF;" d="M284.828,128.917c-3.409-1.851-7.559-1.688-10.813,0.425l-95.137,61.791h-35.164\n                 c-5.845,0-10.583,4.738-10.583,10.582v92.728c0,5.845,4.738,10.583,10.583,10.583h35.164l95.137,61.79\n                 c1.748,1.135,3.754,1.708,5.765,1.708c1.733,0,3.471-0.426,5.049-1.283c3.41-1.852,5.534-5.42,5.534-9.301V138.218\n                 C290.363,134.338,288.239,130.768,284.828,128.917z"/>\n               <path style="fill:#FFFFFF;" d="M319.82,322.937c0.894,0,1.801-0.162,2.685-0.504c24.239-9.412,40.524-38.49,40.524-72.361\n                 c0-29.956-13.2-57.047-33.63-69.018c-3.534-2.072-8.08-0.883-10.153,2.652c-2.072,3.535-0.885,8.082,2.651,10.152\n                 c15.971,9.358,26.291,31.424,26.291,56.213c0,27.36-12.77,51.426-31.055,58.525c-3.82,1.482-5.715,5.783-4.231,9.604\n                 C314.041,321.139,316.847,322.937,319.82,322.937z"/></path></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></symbol></svg>\n            <svg class="icon"><use xlink:href="#audio"></use></svg>\n           </div>\n           <div class='card-info'>\n             <h1 class='card-title'>${s.word}</h1>\n             <div class='translate-panel'>\n                 <h2>${s.wordTranslate}</h2>\n                 <h2>${s.transcription}</h2>\n             </div>\n             <div class = ${t}>\n                 <p>${s.textMeaning}</p>\n                 <p class='text-italic'>${s.textExample}</p>\n             </div>\n             <div class= ${n}>\n                 <p>${s.textMeaningTranslate}</p>\n                 <p class='text-italic'>${s.textExampleTranslate}</p>\n             </div>\n           </div>\n         </div>`;r.innerHTML+=a}F.appendChild(r)}}}))})(),(()=>{const e=document.querySelector(".train"),t=document.querySelector(".play-games");e.addEventListener("click",(()=>{e.classList.toggle("active"),e.classList.contains("active")?t.style.display="flex":t.style.display="none"}))})(),0!=localStorage.length?(async()=>{const e=document.querySelectorAll(".left-panel button"),t=document.querySelector(".dictionary"),n=document.querySelector(".page-number"),s=document.querySelectorAll(".pagination button"),r=k.children[0],a=k.children[1],i=k.children[3],o=k.children[4],l=document.querySelector(".en"),d=document.querySelector(".ru"),c=document.querySelector(".dictionary");let u="",h="",g="",p="0",m="0",f="appear",S="hide",E="",L="b0a2f9";for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);switch(t){case"level":p=`${localStorage.getItem(t)}`;break;case"page":m=`${localStorage.getItem(t)}`;break;case"en":f=`${localStorage.getItem(t)}`;break;case"ru":S=`${localStorage.getItem(t)}`;break;case"color":L=`${localStorage.getItem(t)}`;break;case"name":E=`${localStorage.getItem(t)}`;break;case"word-id":u=`${JSON.parse(localStorage.getItem(t))}`;break;case"learnt-id":h=`${JSON.parse(localStorage.getItem(t))}`;break;case"authorization":g=`${localStorage.getItem(t)}`}}await T(+m,+p,f,S,L);for(let t of e)t.id===p?t.classList.add("active"):t.classList.remove("active");t.style.backgroundColor=`#${L}`;for(let e=0;e<s.length;e++)s[e].style.backgroundColor=`#${L}`;+m>0&&(a.disabled=!1,r.disabled=!1,29==+m&&(i.disabled=!0,o.disabled=!0)),"appear"==S&&(l.disabled=!1,d.disabled=!0),n.innerHTML=""+(+m+1),""!==E&&y(E),"Authenticated"===g&&(c.style.display="flex",b(0),b(1)),v(),w()})():T(0,0,"appear","hide","b0a2f9")},T=async(e,t,n,s,r)=>{const a=await E(e,t);S.classList.add("card-wrapper"),S.innerHTML="";for(let e=0;e<a.length;e++){const t=a[e],i=`<div class='card' id='${t.id}'>\n              <div class='card-img' >\n                <div class='difficult-word' data-tooltip="difficult word" onclick='putDifficult(${e})' id='difficult-word ${e}'></div>\n                <div class='learnt-word' data-tooltip="learnt word" onclick='putLearnt(${e})' id='learnt-word ${e}'><p>✓</div>\n                <img src='https://rssslang.herokuapp.com/${t.image}' alt='${t.word}'>\n              </div>\n              <div class='card-audio' onclick='playAudio(${e})'>\n                <audio id='audio ${e}' src='https://rssslang.herokuapp.com/${t.audio}'></audio>\n                <audio id='audioExample ${e}' src='https://rssslang.herokuapp.com/${t.audioExample}'></audio>\n                <audio id='audioMeaning ${e}' src='https://rssslang.herokuapp.com/${t.audioMeaning}'></audio>\n\n                <svg width="0" height="0" class="hidden"><symbol version="1.1" id="audio" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" xml:space="preserve" viewBox="0 0 496.159 496.159">\n                <path style="fill:#${r};" d="M496.159,248.085c0-137.023-111.07-248.082-248.076-248.082C111.071,0.003,0,111.063,0,248.085\n                  c0,137.001,111.07,248.07,248.083,248.07C385.089,496.155,496.159,385.086,496.159,248.085z"/>\n                <g>\n                  <path style="fill:#FFFFFF;" d="M284.828,128.917c-3.409-1.851-7.559-1.688-10.813,0.425l-95.137,61.791h-35.164\n                    c-5.845,0-10.583,4.738-10.583,10.582v92.728c0,5.845,4.738,10.583,10.583,10.583h35.164l95.137,61.79\n                    c1.748,1.135,3.754,1.708,5.765,1.708c1.733,0,3.471-0.426,5.049-1.283c3.41-1.852,5.534-5.42,5.534-9.301V138.218\n                    C290.363,134.338,288.239,130.768,284.828,128.917z"/>\n                  <path style="fill:#FFFFFF;" d="M319.82,322.937c0.894,0,1.801-0.162,2.685-0.504c24.239-9.412,40.524-38.49,40.524-72.361\n                    c0-29.956-13.2-57.047-33.63-69.018c-3.534-2.072-8.08-0.883-10.153,2.652c-2.072,3.535-0.885,8.082,2.651,10.152\n                    c15.971,9.358,26.291,31.424,26.291,56.213c0,27.36-12.77,51.426-31.055,58.525c-3.82,1.482-5.715,5.783-4.231,9.604\n                    C314.041,321.139,316.847,322.937,319.82,322.937z"/></path></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></symbol></svg>\n               <svg class="icon"><use xlink:href="#audio"></use></svg>\n              </div>\n              <div class='card-info'>\n                <h1 class='card-title'>${t.word}</h1>\n                <div class='translate-panel'>\n                    <h2>${t.wordTranslate}</h2>\n                    <h2>${t.transcription}</h2>\n                </div>\n                <div class = ${n}>\n                    <p>${t.textMeaning}</p>\n                    <p class='text-italic'>${t.textExample}</p>\n                </div>\n                <div class= ${s}>\n                    <p>${t.textMeaningTranslate}</p>\n                    <p class='text-italic'>${t.textExampleTranslate}</p>\n                </div>\n              </div>\n            </div>`;S.innerHTML+=i}},$=new class extends t{render(){F.innerHTML="",L();const t=document.querySelector(".login__conteiner");return t.style.display="none",document.body.className="body",console.log(t),new e("h1","book-title","\n Book").node}},A=new class extends t{render(){const t=new e("div","main__conteiner","").node,n=new e("div","main__conteiner-inner","").node,s=new e("p","main__text","").node;s.innerText="Learn English in the funniest way ​​with the help of electronic textbook and games. Play games, listen to pronunciation, improve your knowledge.";const r=new e("img","main__image","",{src:"../../../images/england.png"}).node,a=new e("button","main__button","Let's go!").node;return n.appendChild(s),n.appendChild(a),t.appendChild(n),t.appendChild(r),document.querySelector(".login__conteiner").style.display="flex",this.login(),t}login(){if(0!=localStorage.length)for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);if("name"===t){const e=`${localStorage.getItem(t)}`;y(e)}}const e=document.querySelector(".footer__button-login"),t=document.querySelector(".wrapper__login"),n=document.querySelector(".wrapper__register"),s=document.querySelectorAll(".close-autorization");null==e||e.addEventListener("click",(()=>{t.classList.toggle("display-none"),n.classList.add("display-none")}));const r=document.querySelector(".footer__button-register");null==r||r.addEventListener("click",(()=>{n.classList.toggle("display-none"),t.classList.add("display-none")})),s.forEach((e=>{e.addEventListener("click",(()=>{n.classList.add("display-none"),t.classList.add("display-none")}))})),(()=>{const e=document.querySelector("#submit-registration"),t=document.querySelector("#username1"),n=document.querySelector("#email"),s=document.querySelector("#password1"),r=document.querySelector(".wrapper__register");e.addEventListener("click",(e=>{e.preventDefault();const a={name:t.value,email:n.value,password:s.value};s.value.length>7&&n.value.includes("@")&&(console.log(a),(async e=>{const t=await fetch("https://rssslang.herokuapp.com/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();console.log(n)})(a),r.style.display="none")}))})(),(()=>{const e=document.querySelector("#submit-login"),t=document.querySelector("#username"),n=document.querySelector("#password");e.addEventListener("click",(async e=>{e.preventDefault();const s={email:t.value,password:n.value},r=await(async e=>{const t=await fetch("https://rssslang.herokuapp.com/signin",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)});return await t.json()})(s);console.log(r),localStorage.setItem("token",r.token),localStorage.setItem("refresh-token",r.refreshToken),localStorage.setItem("name",r.name),localStorage.setItem("id",r.userId),localStorage.setItem("authorization",r.message),y(r.name)}))})()}};function x(){var e=new Audio;e.src="/sounds/false.mp3",e.play()}function I(){var e=new Audio;e.src="/sounds/true.mp3",e.play()}function M(){return!!Math.round(Math.random())}function C(e){if(0===e.length)return 0;let t=0;for(let n=0;n<e.length;n++)"true"===e[n]&&(t+=1);return t}class q{constructor(){this.array=[],this.arrayEng=[],this.arrayRus=[],this.arrayPron=[],this.arrayTranscr=[],this.arrayId=[],this.page=""}async fetchWords(e){const t=await fetch(`https://rssslang.herokuapp.com/words?page=${this.page}&group=${e}`),n=await t.json();this.array=n}async makeQuestionsArray(e,t="any"){this.page="any"===t?String(Math.round(29*Math.random())):t,await this.fetchWords(e),this.array.map((e=>this.arrayEng.push(e.word))),this.array.map((e=>this.arrayRus.push(e.wordTranslate))),this.array.map((e=>this.arrayPron.push(e.audio))),this.array.map((e=>this.arrayTranscr.push(e.transcription))),this.array.map((e=>this.arrayId.push(e.id)))}playAudio(e){new Audio(`https://rssslang.herokuapp.com/${this.arrayPron[e-1]}`).play()}}class _{constructor(e){this.level="any",this.page="any",this.model=new q,this.answers=[],this.timer=()=>{let e=61,t=document.querySelector(".timer"),n=setInterval((()=>(e>0?e--:(clearInterval(n),this.endGame()),t.innerHTML=e<10?`0${e}`:`${e}`,e)),1e3)},this.view=e}playSound(e){this.model.playAudio(e)}endGame(){this.view.renderResultsPage(this.model.arrayTranscr)}async addQuestion(){await this.model.makeQuestionsArray(this.level,this.page)}async createQuiz(e,t){var n;this.level=e,this.page=t,"6"===this.level||await this.model.makeQuestionsArray(this.level,this.page),(n=new Audio).src="/sounds/artquiz_round.mp3",n.play(),this.view.renderSprint(this.model.arrayEng,this.model.arrayRus),this.timer()}}class B{constructor(){this.presenter=new _(this),this.numberWordsEng=0,this.numberWordsRus=0,this.arrayEng=[],this.arrayRus=[],this.arrTrueAnswer=[],this.arrBooleanAnswer=[],this.sum=1,this.count=0,this.rightAnswerSeries=0,this.longestSeries=0,this.gameContainer=document.querySelector("#main__root"),this.leftBut=document.getElementById("btn-left"),this.rightBut=document.getElementById("btn-right"),this.soundImage=document.getElementById("sound-image"),this.renderSprint=(t,n)=>{this.arrayEng=t,this.arrayRus=n,this.gameContainer.innerHTML='\n    <p class="card__sprint-title">Mini game Sprint</p>\n    <div class="card">\n    <div class="sprint-top">\n      <div class="block-timer">\n        <p class="time">Time</p>\n        <p class="timer"></p>\n      </div>\n      <div class="block-result">\n       <p class="result__score">Score</p>\n        <p class="result" id="result">0</p>\n      </div>\n    </div>\n    <div class="card-circle-block" id="card-circle-block">\n    \n    </div>\n    <div class="png-image-block" id="png-image-block">\n    </div>\n    <div class="card-body">\n      </div> \n  </div>\n    ';const s=new e("div","btn-group").node,r=new e("button","btn-answer btn-left","False").node;r.addEventListener("click",(()=>{this.nextQuestionFalse()})),document.addEventListener("keydown",(e=>{"ArrowLeft"==e.code&&this.nextQuestionFalse()})),s.append(r);const a=new e("button","btn-answer btn-right","True").node;a.addEventListener("click",(()=>{this.nextQuestionTrue()})),document.addEventListener("keydown",(e=>{"ArrowRight"==e.code&&this.nextQuestionTrue()})),s.append(a),this.gameContainer.append(s),this.renderMainWords(this.numberWordsEng,this.numberWordsRus)},this.renderMainWords=(e,t)=>{document.querySelector(".card-body").innerHTML=`<img id="sound-image"\n  src="./images/sound.png" alt="sound" />\n     <h5 class="card-title">${this.arrayEng[e]}</h5>\n     <p class="card-text">${this.arrayRus[t]}</p>`,this.playAudio()},this.nextQuestionTrue=()=>{this.numberWordsEng===this.numberWordsRus?(this.rightAnswerSeries++,this.arrTrueAnswer.push(this.arrayEng[this.numberWordsEng]),this.arrBooleanAnswer.push("true"),x()):(this.rightAnswerSeries>this.longestSeries&&(this.longestSeries=this.rightAnswerSeries),this.rightAnswerSeries=0,this.arrTrueAnswer=[],this.arrBooleanAnswer.push("false"),I()),this.sumResult(),this.renderCircleBlock(),this.changeColorPoint(),this.renderToyBlock(),this.numberWordsEng+=1,this.numberWordsRus=this.numberWordsEng,M()||(this.numberWordsEng>=0&&this.numberWordsEng<10?this.numberWordsRus=this.numberWordsEng+10:this.numberWordsEng>=10&&(this.numberWordsRus=this.numberWordsEng-10)),this.numberWordsEng%19==0&&this.presenter.addQuestion(),this.renderMainWords(this.numberWordsEng,this.numberWordsRus)},this.nextQuestionFalse=()=>{this.numberWordsEng!==this.numberWordsRus?(this.rightAnswerSeries++,this.arrTrueAnswer.push(this.arrayEng[this.numberWordsEng]),this.arrBooleanAnswer.push("true"),x()):(this.rightAnswerSeries>this.longestSeries&&(this.longestSeries=this.rightAnswerSeries),this.rightAnswerSeries=0,this.arrTrueAnswer=[],this.arrBooleanAnswer.push("false"),I()),this.sumResult(),this.renderCircleBlock(),this.changeColorPoint(),this.renderToyBlock(),this.numberWordsEng+=1,this.numberWordsRus=this.numberWordsEng,M()&&(this.numberWordsEng>=0&&this.numberWordsEng<10?this.numberWordsRus=this.numberWordsEng+10:this.numberWordsEng>=10&&(this.numberWordsRus=this.numberWordsEng-10)),this.numberWordsEng%19==0&&this.presenter.addQuestion(),this.renderMainWords(this.numberWordsEng,this.numberWordsRus)},this.playAudio=()=>{document.getElementById("sound-image").addEventListener("click",(()=>{this.presenter.playSound(this.numberWordsEng+1)}))},this.sumResult=()=>{const e=document.getElementById("result");return 1===this.arrTrueAnswer.length||2===this.arrTrueAnswer.length||3===this.arrTrueAnswer.length?(this.count+=this.sum,e.innerText=`${this.count}`):this.arrTrueAnswer.length>3&&this.arrTrueAnswer.length<=6?(this.sum=10,this.count+=this.sum,e.innerText=`${this.count}`):this.arrTrueAnswer.length>6&&this.arrTrueAnswer.length<=9?(this.sum=25,this.count+=this.sum,e.innerText=`${this.count}`):this.arrTrueAnswer.length>9?(this.sum=50,this.count+=this.sum,e.innerText=`${this.count}`):void 0},this.renderCircleBlock=()=>{const e=document.getElementById("card-circle-block");let t="grey",n="grey",s="grey";this.arrTrueAnswer.length%3==1&&(t="#18F018"),this.arrTrueAnswer.length%3==2&&(t="#18F018",n="#18F018"),this.arrTrueAnswer.length%3==0&&this.arrTrueAnswer.length>1&&(t="#18F018",n="#18F018",s="#18F018");let r="+1";this.arrTrueAnswer.length<3&&(r="+1"),this.arrTrueAnswer.length>=3&&this.arrTrueAnswer.length<6&&(r="+10"),this.arrTrueAnswer.length>=6&&this.arrTrueAnswer.length<9&&(r="+25"),this.arrTrueAnswer.length>=9&&(r="+50"),e.innerHTML=`\n       <div class="block-point">\n          <h5 id="block-point-inner">${r}</h5>\n        </div>\n        <div class="block-point-svg">\n        <svg height="100" width="100">\n        <circle cx="17" cy="17" r="12" stroke="black" stroke-width="1" fill="${t}" class="circle" />\n      </svg>\n      <svg height="100" width="100">\n        <circle cx="17" cy="17" r="12" stroke="black" stroke-width="1" fill="${n}" class="circle"/>\n      </svg>\n      <svg height="100" width="100">\n        <circle cx="17" cy="17" r="12" stroke="black" stroke-width="1" fill="${s}" class="circle" />\n      </svg>      </div>\n      `},this.changeColorPoint=()=>{let e=document.getElementById("block-point-inner");this.arrTrueAnswer.length<=3&&(e.classList.add("blue"),e.classList.contains("red")&&e.classList.remove("red"),e.classList.contains("orange")&&e.classList.remove("orange"),e.classList.contains("chartreuse")&&e.classList.remove("chartreuse")),this.arrTrueAnswer.length>=3&&this.arrTrueAnswer.length<6&&e.classList.add("red"),this.arrTrueAnswer.length>=6&&this.arrTrueAnswer.length<9&&(e.classList.remove("red"),e.classList.add("orange")),this.arrTrueAnswer.length>=9&&(e.classList.remove("orange"),e.classList.add("chartreuse"))},this.renderToyBlock=()=>{const e=document.getElementById("png-image-block");let t="opacity",n="opacity",s="opacity";this.arrTrueAnswer.length>=3&&(t=""),this.arrTrueAnswer.length>=6&&(n=""),this.arrTrueAnswer.length>=9&&(s=""),e.innerHTML=`  <img\n     src="./images/sprint/makaka1.png"\n     class="card-img-top png-image"\n     alt="crab"\n   />\n   <img\n     src="./images/sprint/makaka2.png"\n     class="card-img-top1 png-image ${t}"\n     alt="duck"\n   />\n   <img\n     src="./images/sprint/makaka3.png"\n     class="card-img-top2 png-image ${n}"\n     alt="poni"\n   />\n   <img\n     src="./images/sprint/makaka4.png"\n     class="card-img-top3 png-image ${s}"\n     alt="sheep"\n   />\n    `},this.renderResultsPage=t=>{const n=document.querySelector(".main"),s=new e("a","close-sprint","×",{href:"#/"}).node,r=new e("a","close-sprint-back ","⇦",{href:"#/game-sprint"}).node;n.append(s,r),s.addEventListener("click",(()=>{const e=document.querySelector(".header"),t=document.querySelector(".footer");e.classList.remove("display-none"),t.classList.remove("display-none"),r.classList.add("display-none"),s.classList.add("display-none"),setTimeout((()=>N()))})),r.addEventListener("click",(()=>{r.classList.add("display-none"),s.classList.add("display-none"),N()}));const a=`\n  <div class="card">\n  <h6 class="card__title-score">Score: ${this.count}</h6>\n  <h6 class="card__title-score">True answear: ${C(this.arrBooleanAnswer)}</h6>\n  <h6 class="card__title-score">False answear: ${this.arrBooleanAnswer.length-C(this.arrBooleanAnswer)}</h6>\n  <div class="card-bodys">\n    <div class="sprint-results"></div>\n  </div>\n</div>\n  `;for(;this.gameContainer.firstChild;)this.gameContainer.removeChild(this.gameContainer.firstChild);const i=new e("div","sprint-results-page").node;i.innerHTML=a,this.gameContainer.append(i);let o=document.querySelector(".sprint-results");const l=new e("ul","sprint-results-list").node;o.append(l);for(let n=1;n<=this.numberWordsEng;n++){const s=new e("li","sprint-results-item").node,r=`<img src="../../images/sound.png" alt="sound" class="results-img" data-number="${n-1}" id='sound-image${n-1}'>`,a=new e("button","sprint-results-button").node;a.innerHTML=r,a.addEventListener("click",(()=>{this.presenter.playSound(n)})),s.append(a);const i=`\n      <h5 class="engWord">${this.arrayEng[n-1]}</h5>\n      <p class="transr">${t[n-1]}</p>\n      <h5 class="rusWords">${this.arrayRus[n-1]}</h5>\n      <img src="./images/${this.arrBooleanAnswer[n-1]}.png" alt="boolean" class="boolenImage">\n    `,o=new e("div","result-item-text").node;o.innerHTML=i,s.append(o),l.append(s)}}}async startQuiz(e,t){await this.presenter.createQuiz(e,t),this.renderToyBlock(),this.renderCircleBlock()}}const W=new class extends t{render(){return this.renderLevelPage(),new e("p","","").node}renderLevelPage(){const t=document.querySelector(".main"),n=document.querySelector(".header"),s=document.querySelector(".footer");n.classList.add("display-none"),s.classList.add("display-none");const r=new e("div","choice__block"),a=r.node,i=new e("pre","choice__block-description","\n    Mini game Sprint\n\n    Trains quick translation from English into Russian. You need \nto choose the appropriate translation for the suggested word.").node,o=new e("p","choice__block-title","Select difficulty level").node,l=new e("div","choice__block-buttons").node;a.append(i,o,l),["1","2","3","4","5","6"].forEach((t=>{const n=new e("button",`choice__block-button button__${t}`,t).node;l.append(n),n.addEventListener("click",(async()=>{this.currentLevel=String(Number(n.innerText)-1),r.destroy();let e=new B;await e.startQuiz(this.currentLevel,"any"),document.body.style.backgroundColor="#001524ff"}))})),t.appendChild(a)}},H=new class extends t{render(){return document.body.className="body",new e("p","","\n Statistics page").node}},F=document.querySelector("#main__root"),R=[{path:"/",component:A},{path:"about-team",component:i},{path:"game-audiocall",component:o},{path:"book",component:$},{path:"game-sprint",component:W},{path:"statistics",component:H}],N=()=>{const e=(n=`${(window.location.hash.slice(2).toLowerCase()||"/").split("/")[0]}`,R.find((e=>e.path===n||void 0))||R[0]),t=null==e?void 0:e.component.render();var n;F.innerHTML="",t&&F.append(t)};(new class{async start(){this.isHashChange(),N()}isHashChange(){window.addEventListener("hashchange",(()=>N()))}}).start()})();